<!-- Parameters -->
<div class="control-section">
    <h3>‚öôÔ∏è Parameters</h3>
    
    <!-- Domain Scale Selector -->
    <div class="param-control" style="border: 2px solid #28a745; padding: 12px; border-radius: 8px; background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(34, 139, 34, 0.1)); margin-bottom: 15px;">
        <label style="font-weight: bold; color: #28a745;">
            üó∫Ô∏è Simulation Scale: 
            <span class="param-value" id="domain-scale-name" style="color: var(--text-color); font-size: 1.1em; font-weight: bold;">City</span>
            <span class="tooltip">
                <span class="help-icon">?</span>
                <span class="tooltiptext">
                    <strong>Domain Scale</strong>
                    Adjust the spatial extent of your simulation from neighborhood to regional scales.
                    <span class="example">üí° Examples:<br>
                    ‚Ä¢ Block: 5√ó5 km (street-level)<br>
                    ‚Ä¢ City: 50√ó50 km (metro area)<br>
                    ‚Ä¢ Regional: 200√ó200 km (multi-city)</span>
                </span>
            </span>
        </label>
        <select id="domain-scale" onchange="updateDomainScale(this.value)" 
                style="margin-top: 8px; width: 100%; padding: 8px; border: 2px solid #28a745; border-radius: 6px; font-size: 1em; background: var(--input-bg); color: var(--text-color); cursor: pointer;">
            <option value="block">üèòÔ∏è Block (5√ó5 km) - Neighborhood scale</option>
            <option value="neighborhood">üèôÔ∏è Neighborhood (10√ó10 km) - District scale</option>
            <option value="city" selected>üåÜ City (50√ó50 km) - Metropolitan area</option>
            <option value="metro">üè¢ Metro Region (100√ó100 km) - Large metro</option>
            <option value="regional">üó∫Ô∏è Regional (200√ó200 km) - Multi-city region</option>
            <option value="state">üåç State (500√ó500 km) - State/province level</option>
        </select>
        <div style="font-size: 0.85em; color: var(--label-color); margin-top: 8px; padding: 8px; background: rgba(40, 167, 69, 0.05); border-radius: 4px; border-left: 3px solid #28a745;">
            <strong>Current:</strong> <span id="domain-info">50√ó50 km, ~417m resolution</span><br>
            <strong>Hotspots:</strong> Scaled automatically for domain
        </div>
    </div>
    
    <!-- Speed Multiplier -->
    <div class="param-control" style="border: 2px solid #667eea; padding: 12px; border-radius: 8px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); margin-bottom: 15px;">
        <label style="font-weight: bold; color: #667eea;">
            üöÄ Speed Multiplier: 
            <span class="param-value" id="speed-multiplier-val" style="color: var(--text-color); font-size: 1.1em; font-weight: bold;">1.0x</span>
            <span class="tooltip">
                <span class="help-icon">?</span>
                <span class="tooltiptext">
                    <strong>Simulation Speed</strong>
                    Accelerates time to see longer-term transport patterns faster.
                    <span class="example">üí° Examples:<br>
                    ‚Ä¢ 0.1x: Slow motion (detailed)<br>
                    ‚Ä¢ 1x: Normal speed<br>
                    ‚Ä¢ 10x: Fast forward (hours in seconds)</span>
                </span>
            </span>
        </label>
        <input type="range" id="speed-multiplier" min="0.1" max="10" step="0.1" value="1.0" 
               oninput="updateSpeedMultiplier(this.value)"
               style="margin-top: 8px;">
        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; margin-top: 8px;">
            <button onclick="setMultiplier(0.1)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">0.1x</button>
            <button onclick="setMultiplier(0.5)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">0.5x</button>
            <button onclick="setMultiplier(1)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">1x</button>
            <button onclick="setMultiplier(5)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">5x</button>
            <button onclick="setMultiplier(10)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">10x</button>
        </div>
        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
            Controls simulation speed - Higher = Faster particle transport
        </div>
    </div>
    
    <div class="param-control">
        <label>
            Turbulent Diffusion (œÉ_turb): 
            <span class="param-value" id="sigma-val">2.5</span>
            <span class="tooltip">
                <span class="help-icon">?</span>
                <span class="tooltiptext">
                    <strong>Atmospheric Turbulence</strong>
                    Controls random motion from eddies and turbulence. Higher values spread plumes more.
                    <span class="example">üí° Examples:<br>
                    ‚Ä¢ 0.1 m/s: Calm, stable air<br>
                    ‚Ä¢ 2.5 m/s: Moderate turbulence<br>
                    ‚Ä¢ 10 m/s: High turbulence</span>
                </span>
            </span>
        </label>
        <input type="range" id="sigma-turb" min="0.1" max="10" step="0.1" value="2.5" 
               oninput="updateParam('sigma_turb', this.value)">
        <div style="font-size: 0.85em; color: #666; margin-top: 3px;">
            Controls plume spreading (0.1 = tight, 10 = very dispersed)
        </div>
    </div>

    <!-- Wind Speed Multiplier -->
    <div class="param-control" style="border: 2px solid #ff6b6b; padding: 12px; border-radius: 8px; background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(238, 82, 83, 0.1)); margin-bottom: 15px;">
        <label style="font-weight: bold; color: #ff6b6b;">
            üí® Wind Speed Multiplier: 
            <span class="param-value" id="wind-speed-multiplier-val" style="color: var(--text-color); font-size: 1.1em; font-weight: bold;">1.0x</span>
            <span class="tooltip">
                <span class="help-icon">?</span>
                <span class="tooltiptext">
                    <strong>Wind Velocity Multiplier</strong>
                    Scales wind speed to simulate different weather conditions. Affects how fast pollutants are transported downwind.
                    <span class="example">üí° Examples:<br>
                    ‚Ä¢ 0.1x: Calm conditions (~1-2 m/s)<br>
                    ‚Ä¢ 1.0x: Normal winds (~12 m/s)<br>
                    ‚Ä¢ 5.0x: Storm/hurricane (~60 m/s)</span>
                </span>
            </span>
        </label>
        <input type="range" id="wind-speed-multiplier" min="0.1" max="5.0" step="0.1" value="1.0" 
               oninput="updateWindSpeedMultiplier(this.value)"
               style="margin-top: 8px;">
        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; margin-top: 8px;">
            <button onclick="setWindSpeed(0.1)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">0.1x</button>
            <button onclick="setWindSpeed(0.5)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">0.5x</button>
            <button onclick="setWindSpeed(1.0)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">1.0x</button>
            <button onclick="setWindSpeed(2.0)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">2.0x</button>
            <button onclick="setWindSpeed(5.0)" style="padding: 4px; font-size: 0.8em; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">5.0x</button>
        </div>
        <div style="font-size: 0.85em; color: var(--label-color); margin-top: 8px; padding: 8px; background: rgba(255, 107, 107, 0.05); border-radius: 4px; border-left: 3px solid #ff6b6b;">
            Controls wind speed: 0.1x = Calm, 1.0x = Normal, 5.0x = Storm
        </div>
    </div>

    <div class="param-control">
        <label>
            Particles per Hotspot (npph): 
            <span class="param-value" id="npph-val">2500</span>
            <span class="tooltip">
                <span class="help-icon">?</span>
                <span class="tooltiptext">
                    <strong>Particle Count per Source</strong>
                    Number of computational particles released from each emission hotspot. More particles = smoother visualization but slower performance.
                    <span class="example">üí° Examples:<br>
                    ‚Ä¢ 500: Fast, rough visualization<br>
                    ‚Ä¢ 2500: Balanced (default)<br>
                    ‚Ä¢ 10000: Smooth, publication-quality</span>
                </span>
            </span>
        </label>
        <input type="range" id="npph" min="500" max="10000" step="500" value="2500" 
               oninput="updateParam('npph', this.value)">
        <div style="font-size: 0.85em; color: #666; margin-top: 3px;">
            More particles = smoother plume but slower simulation
        </div>
    </div>

    <div class="param-control">
        <label>
            Base Time Step (dt): 
            <span class="param-value" id="dt-val">30.0</span> seconds
            <span class="tooltip">
                <span class="help-icon">?</span>
                <span class="tooltiptext">
                    <strong>Simulation Time Step</strong>
                    Base duration of each simulation step before speed multiplier. Smaller = more accurate but slower. Multiplied by speed multiplier for actual dt.
                    <span class="example">üí° Examples:<br>
                    ‚Ä¢ 10s: High accuracy, slow<br>
                    ‚Ä¢ 30s: Balanced (default)<br>
                    ‚Ä¢ 120s: Fast, less accurate</span>
                </span>
            </span>
        </label>
        <input type="range" id="dt" min="1" max="120" step="1" value="30" 
               oninput="updateBaseTimestep(this.value)">
        <div style="font-size: 0.85em; color: #666; margin-top: 3px;">
            Actual dt = <span id="actual-dt" style="font-weight: bold; color: #667eea;">30.0</span>s (base √ó speed multiplier)
        </div>
    </div>

    <div class="param-control">
        <label>
            Wind Field Type:
            <span class="tooltip">
                <span class="help-icon">?</span>
                <span class="tooltiptext">
                    <strong>Wind Data Source</strong>
                    Choose between synthetic (generated) or real meteorological wind data from ERA5/GFS models.
                    <span class="example">üí° Examples:<br>
                    ‚Ä¢ Synthetic: Testing, demonstrations<br>
                    ‚Ä¢ Real (ERA5/GFS): Actual case studies</span>
                </span>
            </span>
        </label>
        <select id="wind-type" onchange="updateWindType()">
            <option value="synthetic">Synthetic Wind</option>
            <option value="real">Real Wind (ERA5/GFS)</option>
        </select>
    </div>
    
    <div class="param-control">
        <label>
            <input type="checkbox" id="show-wind-vectors" checked onchange="toggleWindVectors()">
            Show Wind Vectors
            <span class="tooltip">
                <span class="help-icon">?</span>
                <span class="tooltiptext">
                    <strong>Wind Vector Display</strong>
                    Toggle the display of wind direction arrows on the visualization.
                </span>
            </span>
        </label>
    </div>
</div>
